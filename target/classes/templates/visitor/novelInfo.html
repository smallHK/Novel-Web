<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>小说详情</title>
    <link th:href="@{/bootstrap-4.3.1-dist/css/bootstrap.min.css}" rel="stylesheet">
    <script th:src="@{/js/jquery-3.3.1.js}"></script>
</head>
<body>


<div>
    <h2 th:text="${novel.novelName}">小说名</h2>
    <p th:text="${authorName}">小说作者</p>
    <p th:text="${novel.briefIntro}">小说简介</p>

    <button type="button" class="btn btn-primary btn-lg">查看目录</button>
</div>

<hr>

<div>
    <form th:action="@{/reader/publicNovelComment/{novelId}(novelId=${novel.id})}"  method="post">
        <div class="form-group">
            <label>评论正文</label>
            <textarea class="form-control" rows="5"></textarea>
        </div>
        <input type="submit" class="btn btn-primary">发表评论</input>
    </form>
</div>

<hr>
<div>
    <p>评论人：<span>读者名</span></p>
    <p>评论内容</p>
</div>


<script>
    $(function () {

        //获取所有评论
        $.get("/visitor/listAllNovelComment", function (data) {
            if(data.status === 0) {
                var ul = $("#novel_list_ul");
                ul.empty();
                var novelList = data.novelList;
                for(var i = 0; i < novelList.length; i++) {
                    var novel = novelList[i];
                    var li = $("<li></li>");
                    var a = $("<a></a>");
                    a.attr("href", "/creator/applyForPublish/" + novel.id)
                    var span = $("<span></span>").text(novel.novelName);
                    ul.append(li.append(a.append(span)));
                }
            }
        })

    })


</script>
</body>
</html>