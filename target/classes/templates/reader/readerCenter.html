<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>用户中心</title>
    <link th:href="@{/bootstrap-4.3.1-dist/css/bootstrap-reboot.min.css}" href="../bootstrap-4.3.1-dist/css/bootstrap-reboot.min.css" rel="stylesheet">
    <link th:href="@{/bootstrap-4.3.1-dist/css/bootstrap.min.css}" href="../bootstrap-4.3.1-dist/css/bootstrap.min.css" rel="stylesheet">
    <link th:href="@{/css/content.css}" href="../css/content.css" rel="stylesheet">
    <script th:src="@{/js/jquery-3.3.1.js}" src="../js/jquery-3.3.1.js"></script>
    <script th:src="@{/bootstrap-4.3.1-dist/js/bootstrap.min.js}" src="../bootstrap-4.3.1-dist/js/bootstrap.min.js"></script>
</head>
<body class="main-back">
<nav class="navbar navbar-dark bg-dark mb-3"> <a class="navbar-brand mb-0 h1 text-light" th:href="@{/index}">HK小说网</a>
    <p class="text-light mb-0">欢迎，<span th:text="${session.login_reader_name}">小黑王</span>！</p>
</nav>
<div class="row">
    <div class="col-2">
        <ul class="nav nav-tabs flex-column">
            <li class="nav-item"><a class="nav-link " data-toggle="tab" href="#person-info">个人信息</a></li>
            <li class="nav-item"><a class="nav-link" data-toggle="tab" href="#favorite">收藏夹</a></li>
            <li class="nav-item"><a class="nav-link" data-toggle="tab" href="#comment-manage">评论管理</a></li>
            <li class="nav-item"><a class="nav-link" data-toggle="tab" href="#novel-recommend">小说推荐</a></li>
        </ul>
    </div>
    <div class="col-9 tab-content">
        <div class="tab-pane fade" id="person-info">
            <div class="p-4 text-align-center">
                <h3>个人账户管理</h3>
            </div>
        </div>
        <div class="tab-pane fade" id="favorite">
            <div class="p-4 text-align-center">
                <h3>收藏夹管理</h3>
            </div>
            <div class="row p-3 border-top" id="favorite-novel-list">
                <div class="col-3 text-align-center my-2">
                    <div class="border rounded">
                        <div class="my-1 book-cover-wrapper text-align-center"> <img src="../imgs/cover-sc.jpg" class="book-cover-img"> </div>
                        <div class="rounded-0"> <a class="btn btn-block btn-light" href="#">Campione!(弒神者!)</a> </div>
                    </div>
                </div>
                <div class="col-3 text-align-center my-2">
                    <div class="border rounded text-align-center">
                        <div class="my-1 book-cover-wrapper"> <img src="../imgs/cover-md.jpg" class="book-cover-img"> </div>
                        <div class=""> <a class="btn btn-block btn-light">魔弹之王与冻莲的雪姬</a> </div>
                    </div>
                </div>
                <div class="col-3 text-align-center my-2">
                    <div class="border rounded">
                        <div class="my-1 book-cover-wrapper text-align-center"> <img src="../imgs/cover-sc.jpg" class="book-cover-img"> </div>
                        <div class="rounded-0"> <a class="btn btn-block btn-light" href="#">Campione!(弒神者!)</a> </div>
                    </div>
                </div>
                <div class="col-3 text-align-center my-2">
                    <div class="border rounded text-align-center">
                        <div class="my-1 book-cover-wrapper"> <img src="../imgs/cover-md.jpg" class="book-cover-img"> </div>
                        <div class=""> <a class="btn btn-block btn-light">魔弹之王与冻莲的雪姬</a> </div>
                    </div>
                </div>
                <div class="col-3 text-align-center my-2">
                    <div class="border rounded">
                        <div class="my-1 book-cover-wrapper text-align-center"> <img src="../imgs/cover-sc.jpg" class="book-cover-img"> </div>
                        <div class="rounded-0"> <a class="btn btn-block btn-light" href="#">Campione!(弒神者!)</a> </div>
                    </div>
                </div>
                <div class="col-3 text-align-center my-2">
                    <div class="border rounded text-align-center">
                        <div class="my-1 book-cover-wrapper"> <img src="../imgs/cover-md.jpg" class="book-cover-img"> </div>
                        <div class=""> <a class="btn btn-block btn-light">魔弹之王与冻莲的雪姬</a> </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="tab-pane fade show" id="comment-manage">
            <div class="p-4 text-align-center">
                <h3>评论管理</h3>
            </div>
            <div class="border rounded shadow-sm p-3 my-2" th:each="novelComment: ${novelCommentList}">
                <div class="p-2">
                    <h5 th:text="${novelComment.novelName}">虫之歌</h5>
                </div>
                <div class="row">
                    <div class="col-4">
                        <div class="list-group">
                            <a th:each="comment, iterStat:${novelComment.commentInfoList}"
                               th:class="${iterStat.first}?'list-group-item list-group-item-action active':'list-group-item list-group-item-action'"
                               class="list-group-item list-group-item-action active"
                               th:text="${comment.commentTimeStr}"
                               data-toggle="list" th:href="@{'#com' + ${novelComment.novelId} + '-' + ${comment.id}}"
                            >2019/05/01 22:22:12</a>
                        </div>
                    </div>
                    <div class="col-8">
                        <div class="tab-content">
                            <div th:each="comment, iterStat:${novelComment.commentInfoList}"
                                 th:class="${iterStat.first}?'tab-pane fade show active':'tab-pane fade'"
                                 class="tab-pane fade show active"
                                 id="#com1"
                                 th:id="'com' + ${novelComment.novelId} + '-' + ${comment.id}"
                            >
                                <p th:each="para:${comment.content}" th:text="${para}">说起来这部作品叫异世界4重奏来着...
                                    op和ed出现的主要人物分别都是4个
                                    素晴里穿越来的有4个人
                                    ed中的4位少女都带有雅字
                                    这是否象征着某位米姓男子又将受到迫害了呢(ಡωಡ) </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="tab-pane fade" id="novel-recommend">
            <div class="p-4 text-align-center">
                <h3>小说推荐</h3>
            </div>
            <div>
                <div class="row px-5 mb-4 border-top pt-3">
                    <div class="col-4 text-align-center">
                        <div class="shadow-sm rounded text-align-center">
                            <div class="my-1"> <img th:src="@{/imgs/cover/sao_c.jpg}" src="../imgs/cover-md.jpg" class="book-cover-img"> </div>
                            <div class=""> <a class="btn btn-block btn-light">魔弹之王与冻莲的雪姬</a> </div>
                        </div>
                    </div>
                    <div class="col-4 text-align-center">
                        <div class="shadow-sm rounded text-align-center">
                            <div class="my-1"> <img th:src="@{/imgs/cover/cover-mz.jpg}" src="../imgs/cover-md.jpg" class="book-cover-img"> </div>
                            <div class=""> <a class="btn btn-block btn-light">魔弹之王与冻莲的雪姬</a> </div>
                        </div>
                    </div>
                    <div class="col-4 text-align-center">
                        <div class="shadow-sm rounded text-align-center">
                            <div class="my-1"> <img th:src="@{/imgs/cover/cover-md.jpg}" src="../imgs/cover-md.jpg" class="book-cover-img"> </div>
                            <div class=""> <a class="btn btn-block btn-light">魔弹之王与冻莲的雪姬</a> </div>
                        </div>
                    </div>
                </div>
                <button class="btn btn-block btn-light">换一批</button>
            </div>
        </div>
    </div>
</div>
<script>

    $(document).ready(function () {

        //更新收藏夹
        updateFavorite(1)
    });

    function updateFavorite(pageNum) {
        $("#favorite-novel-list").empty();
        $.get("/reader/listFavorite/" + pageNum + "/" + 8, function (data) {
           if(data.status === 0) {
               var list = data.novelInfos;
               for(var x in list) {
                   $("#favorite-novel-list").append(favoriteCom(list[x]));
               }
           }
        });
    }

    function favoriteCom(novelInfo) {
        var novelLayWrapper = $("<div class=\"col-3 text-align-center my-2\"></div>");
        var novelWrapper = $("<div class=\"border rounded\"></div>");
        novelLayWrapper.append(novelWrapper);
        novelWrapper.append($("<div class=\"my-1 book-cover-wrapper text-align-center\"> <img src=\"/imgs/cover/sao_c.jpg\" class=\"book-cover-img\"></div>"));
        novelWrapper.append($("<div class=\"rounded-0\"> <a class=\"btn btn-block btn-light\"></a> </div>"));
        novelLayWrapper.find("a").text(novelInfo.novelName);
        novelLayWrapper.find("a").attr("href", "/visitor/novelInfo/" + novelInfo.id);
        return novelLayWrapper;
    }


</script>
</body>
</html>